"use strict";(self.webpackChunkarc=self.webpackChunkarc||[]).push([[1460],{3946:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>l});var r=t(4848),a=t(8453);const s={},i="Arc GraphQL",o={id:"graphql",title:"Arc GraphQL",description:"The Arc GraphQL Spring Boot Starter provides a GraphQL API for interacting with Arc Agents.",source:"@site/docs/12-graphql.md",sourceDirName:".",slug:"/graphql",permalink:"/arc/docs/graphql",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:12,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Arc API",permalink:"/arc/docs/api"}},c={},l=[{value:"Agent Subscription",id:"agent-subscription",level:3},{value:"Agent Query",id:"agent-query",level:3},{value:"Setup",id:"setup",level:3},{value:"Arc Chat UI",id:"arc-chat-ui",level:3},{value:"Graphiql",id:"graphiql",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"arc-graphql",children:"Arc GraphQL"}),"\n",(0,r.jsx)(n.p,{children:"The Arc GraphQL Spring Boot Starter provides a GraphQL API for interacting with Arc Agents."}),"\n",(0,r.jsxs)(n.p,{children:["(Hint: Checkout the Project at ",(0,r.jsx)(n.a,{href:"https://github.com/lmos-ai/arc-spring-init",children:"https://github.com/lmos-ai/arc-spring-init"})," for a quick start.)"]}),"\n",(0,r.jsx)(n.p,{children:"Once added to a Spring Boot Application, the following endpoints are available:"}),"\n",(0,r.jsx)(n.h3,{id:"agent-subscription",children:"Agent Subscription"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Agent Subscription"})," endpoint allows you to send a request to an Agent and receive a stream of responses."]}),"\n",(0,r.jsx)(n.p,{children:"The advantage of using a graphql subscription over a standard rest/http endpoint is that the\nwebsocket connection that is created in the background is more robust against timeouts."}),"\n",(0,r.jsx)(n.p,{children:"Furthermore, the subscription enables the Agent to send multiple responses to each request.\nThis can be helpful, for example, when the Agent is executing long-running tasks and wants to provide updates to the user."}),"\n",(0,r.jsx)(n.p,{children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'subscription {\n    agent(\n        agentName: "assistant-agent"\n        request: {\n            conversationContext: {\n                conversationId: "1"\n            }\n            systemContext: [],\n            userContext: {\n                userId: "1234",\n                profile: [{\n                    key: "name",\n                    value: "Pat"\n                }]\n            },\n            messages: [\n                {\n                    role: "user",\n                    content: "Hi",\n                    format: "text",\n                }\n            ]\n        }\n    ) {\n        messages {\n            content\n        }\n    }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["See the ",(0,r.jsx)(n.a,{href:"/arc/docs/api",children:"Arc API"})," for more details on the data models and interfaces."]}),"\n",(0,r.jsx)(n.h3,{id:"agent-query",children:"Agent Query"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Agent Query"})," endpoint returns the list of agents that are active on the server."]}),"\n",(0,r.jsx)(n.p,{children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"query {\n    agent {\n        names\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"setup",children:"Setup"}),"\n",(0,r.jsx)(n.p,{children:"Add the following dependencies to your project:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kts",children:'implementation("ai.ancf.lmos:arc-api:$arcVersion")\nimplementation("ai.ancf.lmos:arc-graphql-spring-boot-starter:$arcVersion")\nimplementation("ai.ancf.lmos:arc-spring-boot-starter:$arcVersion") // recommended\n'})}),"\n",(0,r.jsx)(n.h3,{id:"arc-chat-ui",children:"Arc Chat UI"}),"\n",(0,r.jsxs)(n.p,{children:["The Arc Chat UI is available at ",(0,r.jsx)(n.code,{children:"http://localhost:8080/chat/index.html"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Add the following to your ",(0,r.jsx)(n.code,{children:"application.yml"})," to enable it:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"arc:\n  chat:\n    ui:\n     enabled: true\n"})}),"\n",(0,r.jsx)(n.h3,{id:"graphiql",children:"Graphiql"}),"\n",(0,r.jsxs)(n.p,{children:["The Graphiql UI is available at ",(0,r.jsx)(n.code,{children:"http://localhost:8080/graphiql?path=/graphql"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Add the following to your ",(0,r.jsx)(n.code,{children:"application.yml"})," to enable it:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spring:\n graphql:\n   graphiql:\n    enabled: true\n"})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var r=t(6540);const a={},s=r.createContext(a);function i(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);