"use strict";(self.webpackChunkarc=self.webpackChunkarc||[]).push([[9213],{5478:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"manual_setup","title":"Manual Setup","description":"The Arc Framework can easily be setup with a few lines of code.","source":"@site/docs/00-manual_setup.md","sourceDirName":".","slug":"/manual_setup","permalink":"/arc/docs/manual_setup","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Manual Setup","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Quickstart","permalink":"/arc/docs/quickstart"},"next":{"title":"AI Clients","permalink":"/arc/docs/clients/"}}');var r=t(4848),o=t(8453);const i={title:"Manual Setup",sidebar_position:2},s=void 0,l={},d=[{value:"Loading Agents",id:"loading-agents",level:3},{value:"ChatCompleterProvider",id:"chatcompleterprovider",level:4},{value:"BeanProvider",id:"beanprovider",level:4},{value:"ChatAgentFactory",id:"chatagentfactory",level:4},{value:"ScriptingAgentLoader",id:"scriptingagentloader",level:4},{value:"Hot Reloading Scripts",id:"hot-reloading-scripts",level:4},{value:"Executing Agents",id:"executing-agents",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"The Arc Framework can easily be setup with a few lines of code."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Note: When using Spring Boot, it is recommended to use the ",(0,r.jsx)(n.a,{href:"/docs/spring",children:"Arc Spring Boot Starter"}),"\nso that all the following steps are done automatically."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"loading-agents",children:"Loading Agents"}),"\n",(0,r.jsx)(n.p,{children:"The following shows how to load Scripted Arc Agents manually:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'val chatCompleterProvider = ChatCompleterProvider { modelId ->\n  // Return a ChatCompleter for the given model id\n}\n\nval beanProvider = SetBeanProvider(setOf(chatCompleterProvider))\nval agentFactory = ChatAgentFactory(beanProvider)\nval agentScriptEngine = KtsAgentScriptEngine()\n\nval agentLoader = ScriptingAgentLoader(agentFactory, agentScriptEngine)\nagentLoader.loadAgent("""\n  agent {\n     name = "simple-agent"\n     model = { "modelId" }\n     prompt {\n      "You are a helpful agent." \n     }\n  }\n""") \n\nval loadedAgents = agentLoader.getAgents()\n'})}),"\n",(0,r.jsx)(n.h4,{id:"chatcompleterprovider",children:"ChatCompleterProvider"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"ChatCompleterProvider"})," is a function that returns a ",(0,r.jsx)(n.code,{children:"ChatCompleter"})," for a given model id.\nThe model id comes from the ",(0,r.jsx)(n.code,{children:"model"})," field of an agent."]}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.code,{children:"ChatCompleter"})," is the interface implemented by LLM clients. See the ",(0,r.jsx)(n.a,{href:"/docs/clients",children:"Clients"})," section for more details."]}),"\n",(0,r.jsx)(n.h4,{id:"beanprovider",children:"BeanProvider"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"BeanProvider"})," interface provides the beans that are used within the Arc Agents.\nThese beans can be accessed using the ",(0,r.jsx)(n.code,{children:"get<BeanClass>()"})," method."]}),"\n",(0,r.jsxs)(n.p,{children:["At least a ",(0,r.jsx)(n.code,{children:"ChatCompleterProvider"})," must be provided to the ",(0,r.jsx)(n.code,{children:"BeanProvider"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"chatagentfactory",children:"ChatAgentFactory"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"ChatAgentFactory"})," is responsible for creating ",(0,r.jsx)(n.code,{children:"ChatAgent"})," instances from the agent DSL."]}),"\n",(0,r.jsx)(n.h4,{id:"scriptingagentloader",children:"ScriptingAgentLoader"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"ScriptingAgentLoader"}),' is responsible for loading agents from script files.\nA powerful and flexible way of crafting Arc Agents is to use Kotlin Scripting.\nIn this case, the Arc Agent DSL is placed in Kotlin script files that can be loaded and executed dynamically\nat runtime without restarting the application, i.e. "Hot Reloaded".']}),"\n",(0,r.jsx)(n.h4,{id:"hot-reloading-scripts",children:"Hot Reloading Scripts"}),"\n",(0,r.jsxs)(n.p,{children:["Scripts can be loaded from any source and passed to the ",(0,r.jsx)(n.code,{children:"loadAgent"})," method as a string.\nAlternatively, Agents can be loaded from a folder and reload automatically when the files are modified."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"agentLoader.startHotReload(agentsFolder, hotReloadDelay)\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Note: In order for Agents Scripts to be correctly identified, their files must end with ",(0,r.jsx)(n.code,{children:".agent.kts"})," when containing Agents and\n",(0,r.jsx)(n.code,{children:".functions.kts"})," when containing Functions. This will enable an IDE, such as the IntelliJ IDE,\nto provide syntax highlighting and code completion."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Once loaded, Scripted Agents are no different from Agents loaded by other\nmechanisms."}),"\n",(0,r.jsx)(n.h3,{id:"executing-agents",children:"Executing Agents"}),"\n",(0,r.jsxs)(n.p,{children:["Once an Agent is loaded, it can be executed by passing a ",(0,r.jsx)(n.code,{children:"Conversation"})," object to the ",(0,r.jsx)(n.code,{children:"execute"})," method."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:' val agent = agentLoader.getAgentByName(agentName) as ChatAgent? ?: error("Agent not found!")\n val conversation = Conversation(User("anonymous")) + UserMessage("My question")\n val result = agent.execute(conversation).getOrNull()\n'})}),"\n",(0,r.jsxs)(n.p,{children:["See the ",(0,r.jsx)(n.a,{href:"/docs/cookbook/",children:"cookbook"})," for examples of Agent Scripts."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>s});var a=t(6540);const r={},o=a.createContext(r);function i(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);